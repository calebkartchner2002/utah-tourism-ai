<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Utah Adventure - Utah Tourism AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.0/github-markdown-light.min.css">
    <style>
        .hero-bg {
            background: linear-gradient(135deg, #C73E1D 0%, #E85A24 50%, #F4A261 100%);
        }
        .markdown-body {
            background: transparent;
            font-size: 16px;
        }
        .markdown-body h2 {
            border-bottom: 2px solid #E85A24;
            padding-bottom: 0.5em;
            color: #292524;
        }
        .markdown-body h3 {
            color: #C73E1D;
        }
        .markdown-body ul {
            list-style-type: disc;
        }
        .markdown-body li {
            margin-bottom: 0.5em;
        }
        .markdown-body strong {
            color: #292524;
        }
    </style>
</head>
<body class="bg-stone-50 min-h-screen">
    <!-- Header -->
    <header class="hero-bg text-white">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-2">
                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                    <span class="text-xl font-bold">Utah Tourism AI</span>
                </a>
                <a href="/" class="hover:text-orange-200 transition flex items-center">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Plan Another Trip
                </a>
            </div>
        </nav>
        
        <div class="container mx-auto px-6 py-12 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-4">
                Your Personalized Utah Adventure
            </h1>
            <p class="text-lg text-orange-100">
                Based on your preferences, here's your custom itinerary
            </p>
        </div>
    </header>

    <!-- Trip Parameters -->
    <section class="container mx-auto px-6 -mt-6">
        <div class="bg-white rounded-xl shadow-lg p-6 max-w-4xl mx-auto">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div>
                    <span class="text-stone-500 text-sm block">Interests</span>
                    <span class="font-semibold text-stone-800">{{ interests }}</span>
                </div>
                <div>
                    <span class="text-stone-500 text-sm block">Duration</span>
                    <span class="font-semibold text-stone-800">{{ duration }}</span>
                </div>
                <div>
                    <span class="text-stone-500 text-sm block">Season</span>
                    <span class="font-semibold text-stone-800 capitalize">{{ season }}</span>
                </div>
                <div>
                    <span class="text-stone-500 text-sm block">Activity Level</span>
                    <span class="font-semibold text-stone-800 capitalize">{{ activity_level }}</span>
                </div>
            </div>
            {% if used_search %}
            <div class="mt-4 pt-4 border-t border-stone-200 text-center">
                <span class="inline-flex items-center text-sm text-green-600">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Enhanced with real-time information via MCP Gateway
                </span>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Recommendation Content -->
    <section class="container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="markdown-body">
                    {{ recommendation | safe }}
                </div>
            </div>
            
            <!-- Actions -->
            <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/" 
                   class="inline-flex items-center justify-center px-6 py-3 bg-orange-500 text-white rounded-lg 
                          font-semibold hover:bg-orange-600 transition shadow-md">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Plan Another Trip
                </a>
                <button onclick="window.print()" 
                        class="inline-flex items-center justify-center px-6 py-3 bg-stone-200 text-stone-700 rounded-lg 
                               font-semibold hover:bg-stone-300 transition">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                    </svg>
                    Print Itinerary
                </button>
            </div>
        </div>
    </section>

    <!-- Helpful Links -->
    <section class="bg-stone-100 py-12">
        <div class="container mx-auto px-6">
            <h2 class="text-2xl font-bold text-stone-800 text-center mb-8">
                Helpful Resources
            </h2>
            <div class="grid md:grid-cols-4 gap-6 max-w-4xl mx-auto">
                <a href="https://www.nps.gov/state/ut/index.htm" target="_blank" 
                   class="bg-white p-4 rounded-lg shadow hover:shadow-md transition text-center">
                    <div class="text-2xl mb-2">üèõÔ∏è</div>
                    <span class="font-semibold text-stone-700">NPS Utah</span>
                </a>
                <a href="https://www.visitutah.com" target="_blank"
                   class="bg-white p-4 rounded-lg shadow hover:shadow-md transition text-center">
                    <div class="text-2xl mb-2">üåÑ</div>
                    <span class="font-semibold text-stone-700">Visit Utah</span>
                </a>
                <a href="https://stateparks.utah.gov" target="_blank"
                   class="bg-white p-4 rounded-lg shadow hover:shadow-md transition text-center">
                    <div class="text-2xl mb-2">üèïÔ∏è</div>
                    <span class="font-semibold text-stone-700">State Parks</span>
                </a>
                <a href="https://www.recreation.gov" target="_blank"
                   class="bg-white p-4 rounded-lg shadow hover:shadow-md transition text-center">
                    <div class="text-2xl mb-2">üìÖ</div>
                    <span class="font-semibold text-stone-700">Reservations</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-800 text-stone-300 py-8">
        <div class="container mx-auto px-6 text-center">
            <p class="mb-2">Built with Docker AI ‚Ä¢ Llama 3.2 ‚Ä¢ MCP Gateway</p>
            <p class="text-sm text-stone-500">
                Recommendations generated by AI. Always verify current conditions and make reservations in advance.
            </p>
        </div>
    </footer>

    <script>
        // Simple markdown to HTML conversion for basic formatting
        (function() {
            const content = document.querySelector('.markdown-body');
            if (content) {
                let html = content.innerHTML;
                
                // Convert markdown-style formatting if not already HTML
                if (!html.includes('<h2>') && !html.includes('<h3>')) {
                    // Headers
                    html = html.replace(/^### (.+)$/gm, '<h3>$1</h3>');
                    html = html.replace(/^## (.+)$/gm, '<h2>$1</h2>');
                    html = html.replace(/^\*\*(.+?)\*\*$/gm, '<h3>$1</h3>');
                    
                    // Bold
                    html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
                    
                    // Lists
                    html = html.replace(/^- (.+)$/gm, '<li>$1</li>');
                    html = html.replace(/(<li>.*<\/li>\n?)+/g, '<ul>$&</ul>');
                    
                    // Paragraphs
                    html = html.replace(/\n\n/g, '</p><p>');
                    html = '<p>' + html + '</p>';
                    
                    // Clean up
                    html = html.replace(/<p><\/p>/g, '');
                    html = html.replace(/<p>(<h[23]>)/g, '$1');
                    html = html.replace(/(<\/h[23]>)<\/p>/g, '$1');
                    html = html.replace(/<p>(<ul>)/g, '$1');
                    html = html.replace(/(<\/ul>)<\/p>/g, '$1');
                    
                    content.innerHTML = html;
                }
            }
        })();
    </script>
</body>
</html>
